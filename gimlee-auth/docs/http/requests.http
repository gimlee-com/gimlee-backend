### Register User
# Creates a new user account. The account will initially be unverified.
# Registration requires a unique username and email.
# @name register
POST {{host}}/api/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "password": "Password123!",
  "email": "test@example.com"
}

### Expected Response (Success - 201 Created):
# Content-Type: application/json
#
# {
#   "success": true,
#   "status": "SUCCESS",
#   "message": "Operation completed successfully."
# }


### Login User
# Authenticates a user and returns an authorization token.
# If the user is unverified, the response will indicate that verification is required.
# @name login
POST {{host}}/api/auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "Password123!"
}

> {%
    if (response.body.accessToken) {
        client.global.set("auth_token", response.body.accessToken);
        client.global.set("access_token", response.body.accessToken);
    }
%}

### Expected Response (Success - 200 OK):
# Content-Type: application/json
#
# {
#   "success": true,
#   "status": "SUCCESS",
#   "message": "Operation completed successfully.",
#   "accessToken": "..."
# }


### Verify User
# Verifies the user's account using a code sent to their email.
# Requires a valid (but possibly unverified) session.
# @name verifyUser
POST {{host}}/api/auth/verifyUser
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "code": "123456"
}

> {%
    if (response.body.accessToken) {
        client.global.set("auth_token", response.body.accessToken);
        client.global.set("access_token", response.body.accessToken);
    }
%}

### Expected Response (Success - 200 OK):
# Content-Type: application/json
#
# {
#   "success": true,
#   "status": "SUCCESS",
#   "message": "Operation completed successfully.",
#   "accessToken": "..."
# }


### Check Username Availability
# Checks if a username is already taken.
# @name checkUsername
POST {{host}}/api/auth/register/usernameAvailable
Content-Type: application/json

{
  "username": "testuser"
}

### Expected Response (Success - 200 OK):
# Content-Type: application/json
#
# {
#   "available": false
# }


### Check Email Availability
# Checks if an email is already associated with an account.
# @name checkEmail
POST {{host}}/api/auth/register/emailAvailable
Content-Type: application/json

{
  "email": "test@example.com"
}

### Expected Response (Success - 200 OK):
# Content-Type: application/json
#
# {
#   "available": false
# }


### Init Session
# Checks the current authentication status based on the Authorization header.
# @name initSession
GET {{host}}/api/auth/session/init
Authorization: Bearer {{auth_token}}

> {%
    if (response.body.accessToken) {
        client.global.set("auth_token", response.body.accessToken);
        client.global.set("access_token", response.body.accessToken);
    }
%}

### Expected Response (Success - 200 OK):
# Content-Type: application/json
#
# {
#   "success": true,
#   "accessToken": "..."
# }


### Change Password
# Allows an authenticated user to change their password.
# @name changePassword
POST {{host}}/api/auth/changePassword
Content-Type: application/json
Authorization: Bearer {{auth_token}}

{
  "oldPassword": "OldPassword123!",
  "newPassword": "NewPassword456!"
}

### Expected Response (Success - 200 OK):
# Content-Type: application/json
#
# {
#   "success": true,
#   "status": "SUCCESS",
#   "message": "Operation completed successfully."
# }
